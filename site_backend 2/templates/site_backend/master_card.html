{% extends 'site_backend/base.html' %}
{% load djutils %}
{% load custom_filters %}

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>SB Admin 2 - Tables</title>

  <!-- Custom fonts for this template -->
  <link href="/static/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="/static/css/sb-admin-2.min.css" rel="stylesheet">

  <!-- Custom styles for this page -->
  <link href="/static/vendor/datatables/dataTables.bootstrap4.min.css" rel="stylesheet">

  <script type="text/javascript" src="jquery.dataTables.js"></script>


  <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
        $('#example').DataTable( {
            "order": [[ 3, "desc" ]]
        } );
    } );  
  </script>

</head>

{% block content %}
  <div class="container">
  <div class="row">

      {% with info|get_value_from_dict:'user_data' as user_data %}

          {% if user_data.0|get_value_from_dict:'status' == 3 %}
              <form action="{% url 'site_backend:master_card_unblock_url' info|get_value_from_dict:'id' %}" method="post">
             <button  type="submit" class="btn btn-outline-danger" {% if user_data.0|get_value_from_dict:'status' != 2  %} disabled {% endif %}>–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</button>
            </form>
          {% else %}
             <button type="submit" data-toggle="modal" data-target="#editMenu_locked" class="btn btn-outline-danger"  >–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</button>

          {% endif %}
            {% if user_data.0|get_value_from_dict:'status' == 2 %}
                <form action="{% url 'site_backend:master_card_unfreeze_url' info|get_value_from_dict:'id' %}" method="post">
                <button  type="submit" class="btn btn-outline-info" >–†–∞–∑–º–æ—Ä–æ–∑–∏—Ç—å</button>
                </form>
            {% else %}
                <button type="submit" data-toggle="modal" data-target="#editMenu_frozen" class="btn btn-outline-info">–ó–∞–º–æ—Ä–æ–∑–∏—Ç—å</button>
            {% endif %}
            {% if user_data.0|get_value_from_dict:'exclusive' != 1 %}
                  <form action="{% url 'site_backend:master_card_make_excl_url' info|get_value_from_dict:'id' %}" method="post">
                    <button  type="submit" class="btn btn-outline-primary" >–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –£–Ω–∏–≤–µ—Ä—Å–∞–ª üëë</button>
                  </form>
            {% endif %}
          {% if user_data.0|get_value_from_dict:'exclusive' == 1 %}
              <form action="{% url 'site_backend:master_card_unmake_ecxl_url' info|get_value_from_dict:'id' %}" method="post">
                <button type="submit" class="btn btn-outline-primary" >–£–±—Ä–∞—Ç—å —Å—Ç–∞—Ç—É—Å –£–Ω–∏–≤–µ—Ä—Å–∞–ª üëë</button>
              </form>
          {% endif %}
          </div>
  <!-- USER info -->
{% endwith %}
  <div class="row">
    <!-- User card -->
    <div class="container col col-sm-12 col-md-6 col-xl-6 col-lg-6">
      <div class="card shadow mb-4">
        <div class="card-header">
          <!-- üëë –ï—Å–ª–∏ —ç–∫—Å–∫–ª—é–∑–∏–≤-->
            {% with info|get_value_from_dict:'user_data' as user_data %}
          <h2>–ö–∞—Ä—Ç–æ—á–∫–∞ {% if user_data.0|get_value_from_dict:'exclusive' %} üëë {% endif %} #{{ info|get_value_from_dict:'id' }}</h2>
        </div>
        <div class="card-body">
          <table class="table table-responsive">
            <thead>
              <tr>
                <th>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th>
                <td>{{ user_data.0|get_value_from_dict:'reg_date' }}</td>
              </tr>
              <tr>
                <th>–§–ò–û</th>
                <td>{{ user_data.0|get_value_from_dict:'full_name' }}</td>
              </tr>
              <tr>
                <th>–ì–æ—Ä–æ–¥</th>
                <td>{{ info|get_value_from_dict:'city' }}</td>
              </tr>
              <tr>
                <th>–í–∏–¥—ã —Ä–∞–±–æ—Ç</th>
                <td>
                  <div class="btn-group">
                    <a class="dropdown-toggle text" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">–û—Ç–∫—Ä—ã—Ç—å</a>
                    <div class="dropdown-menu">
                      <label class="form-check-label">
                          {% for wt in info|get_value_from_dict:'work_types' %}
                              {{ wt|get_wt_name }}
                          {% endfor %}
                      </label>
                      </div>
                    </div>
                </td>
              </tr>
              <tr>
                <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                <td>{{ user_data.0|get_value_from_dict:'phone' }}</td>
              </tr>
              <tr>
                <th>–û—Ç–∫–ª–∏–∫–æ–≤ –Ω–∞ –∑–∞–∫–∞–∑—ã</th>
                <td>{{ info|get_value_from_dict:'deals_len' }}</td>
              </tr>
              <tr>
                <th>–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–æ –∑–∞–∫–∞–∑–æ–≤</th>
                <td>{{ info|get_value_from_dict:'proped_deals_ammount' }}</td>
              </tr>
            </thead>
          </table>
          <table class="table table-responsive">
            <thead>
              <tr>
                <th>–ö–∞–∫ –æ –Ω–∞—Å —É–∑–Ω–∞–ª&?</th>
                <td>{{ user_data.0|get_value_from_dict:'about_us' }}</td>
              </tr>
              <tr>
                <!-- –ï—Å–ª–∏ –µ—Å—Ç—å –ø–æ–ª–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å -->
                {% if user_data.0|get_value_from_dict:'promo_id' %}
                    <th>–ü—Ä–æ–º–æ-–∫–æ–¥</th>
                    <td>
                      <a href="{% url "site_backend:master_card_url" user_data.0|get_value_from_dict:'promo_id' %}">{{user_data.0|get_value_from_dict:'promo_id'}}</a>
                    </td>
                {% endif %}
              </tr>
              <tr>
                <th scope="row">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</th>
                <td>{% if user_data.0|get_value_from_dict:'comment' and user_data.0|get_value_from_dict:'comment' != 'None' %}{{ user_data.0|get_value_from_dict:'comment' }} {% else %} - {% endif %}</td>
              </tr>
            </thead>
          </table>
        </div>
      </div>
    </div>
    <!--  Referal + session -->
    {% endwith %}
    <div class="container col col-sm-12 col-md-6 col-xl-6 col-lg-6">
      <!-- User referal -->
      <div class="card shadow mb-4">
        <div class="card-header">
          <!-- üëë –ï—Å–ª–∏ —ç–∫—Å–∫–ª—é–∑–∏–≤-->
          <h2>–†–µ—Ñ–µ—Ä–∞–ª—ã</h2>
        </div>

        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-bordered table-striped" id='example' width="100%" cellspacing="0">
              <thead>
              {% if referal %}

                <tr>
                  <!--
                    üí≥ / üíµ - –Ω–∞–ª/–±–µ–∑–Ω–∞–ª
                  -->
                  <th>ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</th>
                  <th>–ö–æ–ª-–≤–æ —Å–¥–µ–ª–æ–∫</th>
                  <th>–ë–∞–ª–∞–Ω—Å</th>
                </tr>
              </thead>
              <tbody>
              {% for r in referal %}

                <tr>
                  <!-- https://tehpomosh.amocrm.ru/leads/detail/23363851 –ø—Ä–∏–º–µ—Ä —Å—Å—ã–ª–∫–∏ –ø–æ id —Å–¥–µ–ª–∫–∏-->
                  <td><a href="#">{{ r|get_value_from_dict:'id' }}</a></td>
                  <td> <a href="#">{{ r|get_value_from_dict:'deals_ammount' }}</a> </td>
                  <td>{{ r|get_value_from_dict:'balance' }}</td>
                </tr>
              {% endfor %}
              {% else %}
                                  <tr>

                  <h2 style="text-align: center">–ù–µ—Ç —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤</h2>
                  </tr>
              {% endif %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <!-- User session history  -->
      <div class="card shadow mb-4">
        <div class="card-header">
          <!-- üëë –ï—Å–ª–∏ —ç–∫—Å–∫–ª—é–∑–∏–≤-->
          <h2>–ò—Å—Ç–æ—Ä–∏—è —Å–µ—Å—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è </h2>
        </div>
        <div class="card-body">
          <div class="table-responsive" style=" max-height:400px;overflow-y:auto;">
            <table class="table table-bordered"width="100%" cellspacing="0">
              <thead>
                <tr>
                  <!--
                    üí≥ / üíµ - –Ω–∞–ª/–±–µ–∑–Ω–∞–ª
                  -->
                  <th>–î–∞—Ç–∞</th>
                  <th>–ù–∞—á–∞–ª–æ</th>
                  <th>–ö–æ–Ω–µ—Ü</th>
                  <th>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</th>
                </tr>
              </thead>
              <tbody>
               {% with info|get_value_from_dict:'sessions' as sessions %}
                {% for s in sessions %}
                <tr>
                  <!-- https://tehpomosh.amocrm.ru/leads/detail/23363851 –ø—Ä–∏–º–µ—Ä —Å—Å—ã–ª–∫–∏ –ø–æ id —Å–¥–µ–ª–∫–∏-->
                  <th>{{ s|get_value_from_dict:'date' }}</th>
                  <th>{{ s|get_value_from_dict:'start_session' }}</th>
                  <th>{% if  s|get_value_from_dict:'end_session' and  s|get_value_from_dict:'end_session' != 'None' %}{{ s|get_value_from_dict:'end_session' }} {% else %} - {% endif %}</th>
                  <th>{% if  s|get_value_from_dict:'long_session' and  s|get_value_from_dict:'long_session' != 'None' %}{{ s|get_value_from_dict:'long_session' }} {% else %} - {% endif %}</th>
                </tr>
                {% endfor %}
              {% endwith %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Balance -->
  <div class="row">
    <div class="container col col-sm-12 col-md-6 col-xl-6 col-lg-6">
      <div class="card shadow mb-4">
        <div class="card-header">
          <!-- üëë –ï—Å–ª–∏ —ç–∫—Å–∫–ª—é–∑–∏–≤-->
            {% with info|get_value_from_dict:'user_data' as user_data %}
                <h2 class='text-center'>–ë–∞–ª–∞–Ω—Å {{ user_data.0|get_value_from_dict:'balance' }} ‚ÇΩ</h2>
        </div>
        <div class="card-body">
          <div class="btn-group col">
            <button type="submit" data-toggle="modal" data-target="#editMenu_balance" class="btn btn-outline-warning">–ò–∑–º–µ–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å</button>
            <button type="submit" data-toggle="modal" data-target="#editMenu_{{ user_data.0|get_value_from_dict:'id' }}" class="btn btn-outline-warning">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
            <!-- <button class="btn btn-outline-warning " type="submit">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button> -->
            <!-- <button class="btn btn-outline-danger "type="submit">–°–ø–∏—Å–∞—Ç—å</button> -->
            {% endwith %}

          </div>
        </div>
      </div>
    </div>
    <div class="container col col-sm-12 col-md-6 col-xl-6 col-lg-6">
      <div class="card shadow mb-4">
        <div class="card-header">
          <!-- üëë –ï—Å–ª–∏ —ç–∫—Å–∫–ª—é–∑–∏–≤-->
          <h2>–ò—Å—Ç–æ—Ä–∏—è –±–∞–ª–∞–Ω—Å–∞</h2>
        </div>
        <div class="card-body">
          <div class="table-responsive" style=" max-height:400px;overflow-y:auto;">
            <table class="table table-bordered" width="100%" cellspacing="0">
              <thead>
                <tr>
                  <th>–°—É–º–º–∞</th>
                  <th>–î–∞—Ç–∞</th>
                  <th data-toggle="tooltip" data-placement="right" title="–ù–∞ –º–æ–º–µ–Ω—Ç —Å–¥–µ–ª–∫–∏">–ë–∞–ª–∞–Ω—Å</th>
                  <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
              </thead>

              <tbody>
              {% with info|get_value_from_dict:'transfers' as transfers %}
                {% for t in transfers %}
                <tr>
                  <th>{{t|get_value_from_dict:'ammount'}}</th>
                  <th>{{t|get_value_from_dict:'date'}}</th>
                  <th>{{t|get_value_from_dict:'balance'}}</th>
                   {% if '–ø–æ–ø–æ–ª–Ω–∏–ª' in t|get_value_from_dict:'comment' or '–ø–æ–¥–∫–ª—é—á–∏–ª' in t|get_value_from_dict:'comment'%}
                        <th style="color: palegreen">{{t|get_value_from_dict:'comment'}}</th>
                    {% elif '–æ–ø–ª–∞—Ç–∏–ª' in t|get_value_from_dict:'comment'%}
                         <th style="color: gold">{{t|get_value_from_dict:'comment'}}</th>
                    {% else %}
                        <th >{{t|get_value_from_dict:'comment'}}</th>

                    {% endif %}
                </tr>
               {% endfor %}
              {% endwith %}
              </tbody>
            </table>
          </div>

        </div>
      </div>
    </div>
  </div>
    <!-- Deals history -->
  <div class="row">
      <div class="card shadow col">
        <div class="card-header">
          <h2>–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</h2>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
              <thead>
                <tr>
                  <!--
                    üí≥ / üíµ - –Ω–∞–ª/–±–µ–∑–Ω–∞–ª
                  -->
                  <th>–î–∞—Ç–∞</th>
                  <th>ID —Å–¥–µ–ª–∫–∏</th>
                  <th>–ü—Ä–æ—Ü–µ–Ω—Ç</th>
                  <th>–¶–µ–Ω–∞ –æ—Ç –º–∞—Å—Ç–µ—Ä–∞</th>
                  <th>–ù–∞—à–∞ –∫–æ–º–º–∏—Å—Å–∏—è</th>
                  <th>–ó–∞—á–∏—Å–ª–µ–Ω–æ</th>
                  <th>–ü–∞—Ä—Ç–Ω–µ—Ä</th>
                  <th>–°—Ç–∞—Ç—É—Å</th>
                  <th>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</th>
                </tr>
              </thead>
              <tbody>
              {% with info|get_value_from_dict:'deals' as deals %}
              {% for deal in deals %}

                <tr>
                  <!-- https://tehpomosh.amocrm.ru/leads/detail/23363851 –ø—Ä–∏–º–µ—Ä —Å—Å—ã–ª–∫–∏ –ø–æ id —Å–¥–µ–ª–∫–∏-->
                  <td>{{ deal|get_value_from_dict:'date' }}</td>
                  <td class=" text-center" data-toggle="tooltip" data-placement="right" title="üí≥ - –ë–ï–ó–Ω–∞–ª–∏—á–Ω—ã–µ/üíµ- –Ω–∞–ª–∏—á–Ω—ã–µ"> {{ deal|get_value_from_dict:'id' }} {% if deal|get_value_from_dict:'self_employeed' %}üí≥{% else %}üíµ{% endif %}</td>
                  <td>{{ deal|get_value_from_dict:'commission_precent' }}%</td>
                  <td>{% if not deal|get_value_from_dict:'value' or deal|get_value_from_dict:'value' != "None" %}{{ deal|get_value_from_dict:'value' }} ‚ÇΩ {% else %} - {% endif %}</td>
                {% with  value=deal|get_value_from_dict:'value' percent=deal|get_value_from_dict:'commission_precent' %}
                  <td class="text-success">{{ value|count_percent:percent }} ‚ÇΩ</td>
                  <td class="text-danger">{{ value|count_user_percent:percent }} ‚ÇΩ</td>
                {% endwith %}
                  <td> {% if deal|get_value_from_dict:'id_proped' %}<a href="{% url "site_backend:master_card_url" deal|get_value_from_dict:'id_proped' %}">{{deal|get_value_from_dict:'id_proped'}}</a> {% else %} - {% endif %}</td>
                  <td class=" text-center" >
                    <div class="btn-group">
                      {% if deal|get_value_from_dict:'status' == 4%}
                            <button class="btn btn-outline-success dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">–û–ø–ª–∞—á–µ–Ω–æ</button>
                      {% elif deal|get_value_from_dict:'status' == 2 %}
                            <button class="btn btn-outline-warning dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">–û—Ç–ª–æ–∂–µ–Ω–∞</button>
                        {% elif deal|get_value_from_dict:'status' == 3 %}
                            <button class="btn btn-outline-warning dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">–û–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã</button>
                        {% elif deal|get_value_from_dict:'status' == -1 %}
                            <button class="btn btn-outline-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">–°–æ—Ä–≤–∞–Ω–æ</button>
                        {% else %}
                          <td class='text-warning text-center font-weight-bold'>–í —Ä–∞–±–æ—Ç–µ</td>
                        {% endif %}

                      <div class="dropdown-menu">
                        <button class="btn bg-info text-white dropdown-item" data-toggle="modal" data-target="#deal_id_write_off-{{deal|get_value_from_dict:'id'}}">–°–ø–∏—Å–∞—Ç—å</button>
                        <button class="btn bg-warning text-white dropdown-item" data-toggle="modal" data-target="#deal_id_charge-{{deal|get_value_from_dict:'id'}}" >–í–µ—Ä–Ω—É—Ç—å</button>
                      </div>
                    </div>
                  </td>
                  <td> {% if deal|get_value_from_dict:'comment' and deal|get_value_from_dict:'comment' != 'None'  %} {{deal|get_value_from_dict:'comment'}} {% else %} - {% endif %}</td>
                </tr>
              {% endfor %}
              {% endwith %}

              </tbody>
            </table>
          </div>
        </div>
      </div>
  </div>
  <!-- End of Page Wrapper -->
  {% with info|get_value_from_dict:'deals' as deals %}
    {% for deal in deals %}
  <form action="{% url "site_backend:master_card_write_off_url" deal|get_value_from_dict:'id'%}" method="post">
  <div class="modal fade" id="deal_id_write_off-{{deal|get_value_from_dict:'id'}}" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-xl" role="document">
                <div class="modal-content">
                    {% csrf_token %}
                    <h2 class="m-0 font-weight-bold text-primary" style="alignment: center; align-content: center">–°–ø–∏—Å–∞—Ç—å –¥–µ–Ω—å–≥–∏ –ø–æ —Å–¥–µ–ª–∫–µ {{deal|get_value_from_dict:'id'}}</h2>
                    <input type="number" class="form-control" name="money" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É" required><br>
                    <textarea name="comment" id="" cols="20" rows="5" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"></textarea>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-outline-success">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
                        <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">–ó–∞–∫—Ä—ã—Ç—å</button>
                    </div>

                </div>
            </div>
        </div>
  </form>
  <form action="{% url "site_backend:master_card_charge_url" deal|get_value_from_dict:'id'%}" method="post">
      <div class="modal fade" id="deal_id_charge-{{deal|get_value_from_dict:'id'}}" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-xl" role="document">
                    <div class="modal-content">
                        {% csrf_token %}
                        <h2 class="m-0 font-weight-bold text-primary" style="alignment: center; align-content: center">–í–µ—Ä–Ω—É—Ç—å –¥–µ–Ω—å–≥–∏ –ø–æ —Å–¥–µ–ª–∫–µ {{deal|get_value_from_dict:'id'}}</h2>
                        <input type="number" class="form-control" name="money" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É" required><br>
                        <textarea name="comment" id="" cols="20" rows="5" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"></textarea>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-outline-success">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
                            <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">–ó–∞–∫—Ä—ã—Ç—å</button>
                        </div>
                    </div>
                </div>
            </div>
  </form>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-->
<div class="modal fade" id="editMenu_balance" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <div class="col">
          <h5 class="modal-title" id="exampleModalLabel">–ò–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h5>
          <span>–î–ª—è —Å–ø–∏—Å–∞–Ω–∏—è —Å—Ä–µ–¥—Å—Ç –≤ –±–∞–ª–∞–Ω—Å–∞ –≤–≤–µ–¥–∏—Ç–µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ</span>
          <button class="close" type="button" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">√ó</span>
          </button>
        </div>
      </div>
      <form action="{% url 'site_backend:master_card_change_balance_url' info|get_value_from_dict:'id' %}" method="post">
        {% csrf_token %}
        <div class="modal-body">
          <input class="form-control" type="number" name="main_balance" value="" placeholder="–í–∑–∞–∏–º–æ–¥–µ—Å—Ç–≤–∏–µ —Å –æ—Å–Ω–æ–≤–Ω—ã–º –±–∞–ª–∞–Ω—Å–æ–º"><br>
          <input class="form-control" type="number" name="bonuses" value="" placeholder="–í–∑–∞–∏–º–æ–¥–µ—Å—Ç–≤–∏–µ —Å –±–æ–Ω—É—Å–Ω—ã–º –±–∞–ª–∞–Ω—Å–æ–º"><br>
          <div class="container">
            <div class="row align-items-center justify-content-center">
              <button class="btn btn-outline-success col-6" type="submit" >
                –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
<div class="modal fade" id="editMenu_locked" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è</h5>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">√ó</span>
        </button>
      </div>
      <form action="{% url 'site_backend:master_card_block_url' info|get_value_from_dict:'id' %}" method="post">
        <div class="modal-body">
            <input class="form-control" type="text" name="comment" value="" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏"><br>
            <div class="container">
              <div class="row align-items-center justify-content-center">
                <button class="btn btn-outline-success col-6" type="submit" >
                  –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
                </button>
              </div>
            </div>
          </div>
      </form>
    </div>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–º–æ—Ä–æ–∑–∫–∏ -->
<div class="modal fade" id="editMenu_frozen" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">–ó–∞–º–æ—Ä–æ–∑–∫–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è</h5>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">√ó</span>
        </button>
      </div>
      <form action="{% url 'site_backend:master_card_freeze_url' info|get_value_from_dict:'id' %}" method="post">
        <div class="modal-body">
            <input class="form-control" type="text" name="comment" value="" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –∑–∞–º–æ—Ä–æ–∑–∫–∏"><br>
            <div class="container">
              <div class="row align-items-center justify-content-center">
                <button class="btn btn-outline-success col-6" type="submit" >
                  –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
                </button>
              </div>
            </div>
          </div>
      </form>
    </div>
  </div>
</div>
          {% endfor %}
    {% endwith %}


          {% with info|get_value_from_dict:'user_data' as user_data %}
            {% with user_data.0 as emp %}
                {{ emp }}
                <div class="modal fade" id="editMenu_{{ emp|get_value_from_dict:'id' }}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è</h5>
                  <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">√ó</span>
                  </button>
                </div>
               <form action="{% url 'site_backend:edit_users_data' emp|get_value_from_dict:'id' %}" method="post">
                  {% csrf_token %}
                <div class="modal-body">
                  {% if emp|get_value_from_dict:'exlusive' %}
                    üëë
                  {% endif %}
                  <input class="form-control" type="text" name="full_name" value="{{ emp|get_value_from_dict:'full_name' }}" placeholder="–ò–º—è"><br>
                  <input class="form-control" type="text" name="phone" placeholder="–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞" value="{{ emp|get_value_from_dict:'phone' }}"><br>
                  <p>–°–ø–∏—Å–æ–∫ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π:</p>
                      <div class="container" >
                          {% for wt in work_types %}
                           {% if wt|get_value_from_dict:'id' in info|get_value_from_dict:'work_types' %}
                              <input class="form-check-input" type="checkbox" value="{{ wt|get_value_from_dict:'id' }}" name="emp_wt" id="defaultCheck1" checked>
                              <label class="form-check-label" for="defaultCheck1" >
                                {{ wt|get_value_from_dict:'type' }}
                              </label><br>
                            {% else %}
                              <input class="form-check-input" type="checkbox" value="{{ wt|get_value_from_dict:'id' }}" name="emp_wt" id="defaultCheck1" >
                              <label class="form-check-label" for="defaultCheck1">
                                {{ wt|get_value_from_dict:'type' }}
                              </label><br>
                            {% endif %}

                        {% endfor %}
                          <br><br>
                        {% if emp|get_value_from_dict:'exclusive' %}
                          <input type="checkbox" class="custom-control-input" id="excl_type" value="on" name="excl_type" checked >
                          <label class="custom-control-label" for="excl_type"> –°—Ç–∞—Ç—É—Å —É–Ω–∏–≤–µ—Ä—Å–∞–ª–∞ </label>
                      {% else %}
                          <input type="checkbox" class="custom-control-input" id="excl_type" value="off" name="excl_type"  >
                          <label class="custom-control-label" for="excl_type"> –°—Ç–∞—Ç—É—Å —É–Ω–∏–≤–µ—Ä—Å–∞–ª–∞ </label>
                      {% endif %}
                      </div>
                  <br><br>
                

                </div>
                <div class="modal-footer">

                  <button class="btn btn-outline-success" type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                  <button class="btn btn-outline-secondary" type="submit" data-dismiss="modal" aria-label="Close">–û—Ç–º–µ–Ω–∞</button>
                </div>
                              </form>

              </div>
            </div>
          </div>
    {% endwith %}
    {% endwith %}
{% endblock %}